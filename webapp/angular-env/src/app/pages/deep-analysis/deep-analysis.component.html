<div class="container">
  <h2>Глубокий анализ видео</h2>

  <div class="uploader">
    <input type="file" #fileInput (change)="onFilesPicked($event)" accept="video/*" hidden>
    <button (click)="onOpenPicker()" [disabled]="uploading || running">Выбрать файл</button>
    <span *ngIf="selectedFile">{{ selectedFile.name }}</span>
    <button (click)="upload()" [disabled]="!selectedFile || uploading || running">Загрузить</button>
    <span *ngIf="uploadedFilename" class="ok">Загружено: {{ uploadedFilename }}</span>
  </div>

  <div class="actions">
    <button (click)="runAnalysis()" [disabled]="!uploadedFilename || running">Глубокий анализ</button>
    <span *ngIf="running">Обработка... это может занять время</span>
  </div>

  <div *ngIf="error" class="error">{{ error }}</div>

  <div class="results" *ngIf="emotionsImgUrl || avatarGifUrl">
    <div class="result-block" *ngIf="emotionsImgUrl">
      <h3>Графики эмоций</h3>
      <img [src]="emotionsImgUrl" alt="Emotions plot" class="plot-img">
    </div>

    <div class="result-block" *ngIf="avatarGifUrl">
      <h3>Схематический плеер эмоций</h3>
      <img [src]="avatarGifUrl" alt="Avatar animation" class="gif-img">
    </div>
  </div>
</div>
